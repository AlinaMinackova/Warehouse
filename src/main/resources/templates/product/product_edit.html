<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/header :: head}"></head>
<body>

<!-- üîπ –ù–∞–≤–±–∞—Ä -->
<div th:replace="~{fragments/header :: body}"></div>

<div class="container flex-grow-1 mt-4">
    <h2 class="text-center mb-4">–†–ï–î–ê–ö–¢–ò–†–û–í–ê–¢–¨ –ü–†–û–î–£–ö–¢</h2>

    <div class="form-container">
        <form th:action="@{/product/{id}/edit(id=${product.id})}" th:object="${product}" method="post" enctype="multipart/form-data">
            <!-- Spring Boot —Ç—Ä–µ–±—É–µ—Ç –¥–ª—è PUT: —Å–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ -->
            <input type="hidden" name="_method" value="put"/>

            <!-- –ù–∞–∑–≤–∞–Ω–∏–µ -->
            <div class="mb-3">
                <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                <input type="text" class="form-control" th:field="*{name}" required maxlength="255"/>
            </div>

            <!-- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å -->
            <div class="mb-3">
                <label class="form-label">–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å</label>
                <select name="manufacturerId" class="form-control" required>
                    <option value="" disabled>–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—è</option>
                    <option th:each="m : ${manufacturers}"
                            th:value="${m.id}"
                            th:text="${m.name}"
                            th:selected="${product.manufacturer != null and product.manufacturer.id == m.id}">
                    </option>
                </select>
            </div>

            <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏—è -->
            <div class="mb-3">
                <label class="form-label">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                <select name="categoryId" class="form-control" required>
                    <option value="" disabled>–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</option>
                    <option th:each="c : ${categories}"
                            th:value="${c.id}"
                            th:text="${c.name}"
                            th:selected="${product.category != null and product.category.id == c.id}">
                    </option>
                </select>
            </div>

            <!-- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ -->
            <div class="mb-3">
                <label class="form-label">–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</label>

                <div th:if="${product.imageUrl != null}">
                    <img th:src="${product.imageUrl}" alt="–¢–µ–∫—É—â–∞—è –∫–∞—Ä—Ç–∏–Ω–∫–∞" style="max-height: 100px; display:block; margin-bottom: 10px; border-radius:5px;">
                    <label class="btn btn-secondary btn-sm">
                        –ò–∑–º–µ–Ω–∏—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫—É
                        <input type="file" name="file" class="d-none">
                    </label>
                </div>
                <div th:if="${product.imageUrl == null}">
                    <input type="file" class="form-control" name="file">
                </div>
            </div>

            <!-- –°—Ä–æ–∫ –≥–æ–¥–Ω–æ—Å—Ç–∏ -->
            <div class="mb-3">
                <label class="form-label">–°—Ä–æ–∫ –≥–æ–¥–Ω–æ—Å—Ç–∏ (–¥–Ω.)</label>
                <input type="number" class="form-control" th:field="*{lifeDays}" min="1"/>
            </div>

            <!-- –í–µ—Å -->
            <div class="mb-3">
                <label class="form-label">–í–µ—Å (–∫–≥)</label>
                <input type="number" step="0.01" class="form-control" th:field="*{weight}" min="0.01"/>
            </div>

            <!-- –°–æ—Å—Ç–∞–≤ -->
            <div class="mb-3">
                <label class="form-label">–°–æ—Å—Ç–∞–≤</label>
                <textarea class="form-control" th:field="*{composition}" rows="3"></textarea>
            </div>

            <button type="submit" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
        </form>
    </div>
</div>

<div th:replace="~{fragments/footer :: footer}"></div>
</body>
</html>
